---
import getArchives from "../lib/getArchives";

function getSortedValues<T>(obj: Record<string, T>): T[] {
  return Object.entries(obj)
    .sort((a, b) => +b[0] - +a[0])
    .map(([, v]) => v);
}

const archives = await getArchives();
const years = getSortedValues(archives);
---

<div>
  <h3>Archives</h3>
  <ul>
    {
      years.map((y) => (
        <li>
          <a href={`/${y.label}`}>
            {y.label} ({y.post_count})
          </a>
        </li>
      ))
    }
  </ul>
</div>
